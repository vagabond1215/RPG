export const WEAPON_SLOTS = [
  "mainHand",
  "offHand",
  "ranged",
  "instrument",
  "ammo"
];

export const ARMOR_SLOTS = [
  "head",
  "body",
  "back",
  "hands",
  "waist",
  "legs",
  "feet"
];

export const TRINKET_SLOTS = [
  "lEar",
  "rEar",
  "neck",
  "lRing",
  "rRing",
  "pouch"
];

export const CODEX_SCHEMA = {
  schemaVersion: "0.6",
  ids: {
    namespace: "codex",
    prefixes: {
      armor: "arm:",
      trinket: "trn:",
      armorSet: "aset:",
      weaponUpgradeRule: "wur:",
      combat: "cmb:"
    }
  },
  enums: {
    damageTypes: ["BLUNT", "SLASH", "PIERCE"],
    armorClasses: ["Light", "Medium", "Heavy"],
    slotsArmor: ["head", "body", "back", "hands", "waist", "legs", "feet"],
    slotsWeapons: ["mainHand", "offHand", "ranged", "instrument", "ammo"],
    slotsTrinkets: ["lEar", "rEar", "neck", "lRing", "rRing", "pouch"],
    quality: ["Standard", "Fine", "Masterwork"],
    regions: [
      "High Kingdoms",
      "Southern Kingdoms",
      "Northern Marches",
      "Eastern Realms",
      "Borderlands",
      "Island Clans",
      "Southern Steppes",
      "High Villages"
    ]
  }
};

export const ARMOR_CATALOG = {
  items: [
    {
      id: "arm:padded-gambeson-body",
      categoryKey: "armor",
      internalName: "padded-gambeson-body",
      displayName: "Padded Gambeson (Body)",
      baseItem: "Padded gambeson",
      variant: "Quilted linen",
      qualityTier: "Common",
      primaryConsumer: "Infantry",
      unit: "each",
      marketValueCp: 960,
      displayPrice: "9si 60cp",
      suggestedPriceCp: 960,
      materialCostCp: null,
      laborCostCp: null,
      overheadCp: 96,
      netProfitCp: 864,
      dutyPct: 0,
      regions: ["High Kingdoms"],
      perishable: false,
      bulky: true,
      fragile: false,
      valueDense: false,
      corridorFriendly: true,
      defense: 28,
      strReq: 0,
      weightClass: "Light",
      resists: { BLUNT: 6, SLASH: 12, PIERCE: 4 },
      weakness: { PIERCE: -2 },
      slots: ["body"],
      setMemberships: ["aset:light-scout"]
    },
    {
      id: "arm:padded-gambeson-legs",
      categoryKey: "armor",
      internalName: "padded-gambeson-legs",
      displayName: "Padded Chausses (Legs)",
      baseItem: "Padded gambeson",
      variant: "Quilted linen",
      qualityTier: "Common",
      primaryConsumer: "Infantry",
      unit: "pair",
      marketValueCp: 360,
      displayPrice: "3si 60cp",
      suggestedPriceCp: 360,
      materialCostCp: null,
      laborCostCp: null,
      overheadCp: 36,
      netProfitCp: 324,
      dutyPct: 0,
      regions: ["High Kingdoms"],
      defense: 10,
      strReq: 0,
      weightClass: "Light",
      resists: { BLUNT: 3, SLASH: 6, PIERCE: 2 },
      slots: ["legs"]
    },
    {
      id: "arm:leather-armor-studded-body",
      categoryKey: "armor",
      internalName: "leather-armor-studded-body",
      displayName: "Studded Leather (Body)",
      baseItem: "Leather armor (studded)",
      variant: "Studded",
      qualityTier: "Common",
      primaryConsumer: "Skirmisher",
      unit: "each",
      marketValueCp: 1920,
      displayPrice: "19si 20cp",
      suggestedPriceCp: 1920,
      materialCostCp: null,
      laborCostCp: null,
      overheadCp: 192,
      netProfitCp: 1728,
      dutyPct: 0,
      regions: ["High Kingdoms"],
      defense: 34,
      strReq: 0,
      weightClass: "Light",
      resists: { BLUNT: 6, SLASH: 16, PIERCE: 6 },
      slots: ["body"]
    },
    {
      id: "arm:leather-armor-studded-head",
      categoryKey: "armor",
      internalName: "leather-cap-studded",
      displayName: "Studded Leather Cap (Head)",
      baseItem: "Leather armor (studded)",
      variant: "Cap",
      qualityTier: "Common",
      unit: "each",
      marketValueCp: 420,
      displayPrice: "4si 20cp",
      suggestedPriceCp: 420,
      materialCostCp: null,
      laborCostCp: null,
      overheadCp: 42,
      netProfitCp: 378,
      defense: 8,
      strReq: 0,
      weightClass: "Light",
      resists: { BLUNT: 1, SLASH: 5, PIERCE: 2 },
      slots: ["head"],
      setMemberships: ["aset:light-scout"]
    },
    {
      id: "arm:chain-shirt-body",
      categoryKey: "armor",
      internalName: "chain-shirt-body",
      displayName: "Mail Shirt (Body)",
      baseItem: "Chain shirt",
      variant: "Riveted",
      qualityTier: "Common",
      unit: "each",
      marketValueCp: 4800,
      displayPrice: "2g 8si",
      suggestedPriceCp: 4800,
      materialCostCp: null,
      laborCostCp: null,
      overheadCp: 480,
      netProfitCp: 4320,
      defense: 48,
      strReq: 2,
      weightClass: "Medium",
      resists: { BLUNT: 8, SLASH: 26, PIERCE: 10 },
      weakness: { BLUNT: -3 },
      slots: ["body"],
      setMemberships: ["aset:medium-mail"]
    },
    {
      id: "arm:chain-shirt-head",
      categoryKey: "armor",
      internalName: "coif-mail",
      displayName: "Mail Coif (Head)",
      baseItem: "Chain shirt",
      variant: "Riveted",
      qualityTier: "Common",
      unit: "each",
      marketValueCp: 900,
      displayPrice: "9si",
      suggestedPriceCp: 900,
      materialCostCp: null,
      laborCostCp: null,
      overheadCp: 90,
      netProfitCp: 810,
      defense: 10,
      strReq: 1,
      weightClass: "Medium",
      resists: { BLUNT: 2, SLASH: 6, PIERCE: 2 },
      weakness: { BLUNT: -1 },
      slots: ["head"],
      setMemberships: ["aset:medium-mail"]
    },
    {
      id: "arm:chain-hauberk-body",
      categoryKey: "armor",
      internalName: "chain-hauberk-body",
      displayName: "Mail Hauberk (Body)",
      baseItem: "Chain hauberk",
      variant: "Knee-length",
      qualityTier: "Common",
      unit: "each",
      marketValueCp: 12000,
      displayPrice: "1pl 1g",
      suggestedPriceCp: 12000,
      materialCostCp: null,
      laborCostCp: null,
      overheadCp: 1200,
      netProfitCp: 10800,
      defense: 62,
      strReq: 3,
      weightClass: "Medium",
      resists: { BLUNT: 10, SLASH: 32, PIERCE: 12 },
      weakness: { BLUNT: -4 },
      slots: ["body", "legs"]
    },
    {
      id: "arm:helmet-open-head",
      categoryKey: "armor",
      internalName: "helmet-open",
      displayName: "Open Helmet (Head)",
      baseItem: "Helmet (open)",
      variant: "Nasaled",
      qualityTier: "Common",
      unit: "each",
      marketValueCp: 960,
      displayPrice: "9si 60cp",
      suggestedPriceCp: 960,
      materialCostCp: null,
      laborCostCp: null,
      overheadCp: 96,
      netProfitCp: 864,
      defense: 14,
      strReq: 0,
      weightClass: "Medium",
      resists: { BLUNT: 6, SLASH: 6, PIERCE: 4 },
      slots: ["head"]
    },
    {
      id: "arm:helmet-visored-head",
      categoryKey: "armor",
      internalName: "helmet-visored",
      displayName: "Visored Helm (Head)",
      baseItem: "Helmet (visored)",
      variant: "Faceplate",
      qualityTier: "Common",
      unit: "each",
      marketValueCp: 1800,
      displayPrice: "18si",
      suggestedPriceCp: 1800,
      materialCostCp: null,
      laborCostCp: null,
      overheadCp: 180,
      netProfitCp: 1620,
      defense: 22,
      strReq: 1,
      weightClass: "Medium",
      resists: { BLUNT: 10, SLASH: 8, PIERCE: 8 },
      slots: ["head"],
      setMemberships: ["aset:heavy-plate"]
    },
    {
      id: "arm:shield-wooden-round-offhand",
      categoryKey: "armor",
      internalName: "shield-wooden-round",
      displayName: "Shield, Wooden Round (Off-hand)",
      baseItem: "Shield, wooden round",
      variant: "Linden board",
      qualityTier: "Common",
      unit: "each",
      marketValueCp: 360,
      displayPrice: "3si 60cp",
      suggestedPriceCp: 360,
      materialCostCp: null,
      laborCostCp: null,
      overheadCp: 36,
      netProfitCp: 324,
      defense: 16,
      blockChanceBonusPct: 10,
      blockPowerBonus: 8,
      shieldBlockChancePct: 10,
      shieldDamageReductionPct: 8,
      shieldBashDamage: 3,
      shieldBashStunChancePct: 12,
      resists: { BLUNT: 6, SLASH: 8, PIERCE: 4 },
      slots: ["offHand"],
      setMemberships: ["aset:light-scout"]
    },
    {
      id: "arm:shield-iron-kite-offhand",
      categoryKey: "armor",
      internalName: "shield-iron-kite",
      displayName: "Shield, Iron Kite (Off-hand)",
      baseItem: "Shield, iron kite",
      variant: "Rimmed",
      qualityTier: "Common",
      unit: "each",
      marketValueCp: 1440,
      displayPrice: "14si 40cp",
      suggestedPriceCp: 1440,
      materialCostCp: null,
      laborCostCp: null,
      overheadCp: 144,
      netProfitCp: 1296,
      defense: 26,
      strReq: 1,
      blockChanceBonusPct: 14,
      blockPowerBonus: 14,
      shieldBlockChancePct: 14,
      shieldDamageReductionPct: 14,
      shieldBashDamage: 5,
      shieldBashStunChancePct: 18,
      resists: { BLUNT: 10, SLASH: 12, PIERCE: 8 },
      slots: ["offHand"],
      setMemberships: ["aset:medium-mail"]
    },
    {
      id: "arm:plate-cuirass-body",
      categoryKey: "armor",
      internalName: "plate-cuirass",
      displayName: "Plate Cuirass (Body)",
      baseItem: "Plate cuirass",
      variant: "Breast+Back",
      qualityTier: "Common",
      unit: "each",
      marketValueCp: 9600,
      displayPrice: "4g 16si",
      suggestedPriceCp: 9600,
      materialCostCp: null,
      laborCostCp: null,
      overheadCp: 960,
      netProfitCp: 8640,
      defense: 72,
      strReq: 4,
      weightClass: "Heavy",
      resists: { BLUNT: 18, SLASH: 30, PIERCE: 28 },
      slots: ["body"],
      setMemberships: ["aset:heavy-plate"]
    },
    {
      id: "arm:full-plate-harness-body",
      categoryKey: "armor",
      internalName: "full-plate-harness",
      displayName: "Full Plate Harness (Body Set)",
      baseItem: "Full plate harness",
      variant: "Complete",
      qualityTier: "Luxury",
      unit: "each",
      marketValueCp: 24000,
      displayPrice: "2pl 2g",
      suggestedPriceCp: 24000,
      materialCostCp: null,
      laborCostCp: null,
      overheadCp: 2400,
      netProfitCp: 21600,
      defense: 120,
      strReq: 6,
      weightClass: "Heavy",
      resists: { BLUNT: 30, SLASH: 50, PIERCE: 46 },
      critDamageReductionPct: 10,
      critDefense: 6,
      slots: ["head", "body", "hands", "legs", "feet"],
      setMemberships: ["aset:heavy-plate"]
    }
  ],
  sets: [
    {
      id: "aset:light-scout",
      displayName: "Light Scout Set",
      components: [
        "arm:padded-gambeson-body",
        "arm:leather-armor-studded-head",
        "arm:shield-wooden-round-offhand"
      ],
      class: "Light",
      setBonuses: {
        EVADE_PCT: 5,
        staminaRegenPct: 4
      }
    },
    {
      id: "aset:medium-mail",
      displayName: "Riveted Mail Set",
      components: [
        "arm:chain-shirt-body",
        "arm:chain-shirt-head",
        "arm:shield-iron-kite-offhand"
      ],
      class: "Medium",
      setBonuses: {
        blockChancePct: 4,
        DMG_TAKEN_PCT: -3
      }
    },
    {
      id: "aset:heavy-plate",
      displayName: "Knightâ€™s Plate Set",
      components: [
        "arm:plate-cuirass-body",
        "arm:helmet-visored-head",
        "arm:full-plate-harness-body"
      ],
      class: "Heavy",
      setBonuses: {
        critDamageReductionPct: 8,
        staggerResistPct: 15
      }
    }
  ]
};

export const TRINKET_CATALOG = {
  items: [
    {
      id: "trn:brooch-bronze-simple",
      displayName: "Simple Brooch, Bronze",
      variant: "Simple",
      qualityTier: "Common",
      marketValueCp: 72,
      displayPrice: "72cp",
      suggestedPriceCp: 72,
      netProfitCp: 12.888,
      slots: ["pouch", "neck"]
    },
    {
      id: "trn:brooch-bronze-standard",
      displayName: "Standard Brooch, Bronze",
      variant: "Standard",
      qualityTier: "Common",
      marketValueCp: 80,
      displayPrice: "80cp",
      suggestedPriceCp: 80,
      netProfitCp: 13.52,
      slots: ["pouch", "neck"]
    },
    {
      id: "trn:brooch-bronze-fine",
      displayName: "Fine Brooch, Bronze",
      variant: "Fine",
      qualityTier: "Fine",
      marketValueCp: 123.36,
      displayPrice: "1si 23cp 3st 6ci",
      suggestedPriceCp: 123,
      netProfitCp: 18.504,
      slots: ["pouch", "neck"]
    },
    {
      id: "trn:brooch-bronze-ornate",
      displayName: "Ornate Brooch, Bronze",
      variant: "Ornate",
      qualityTier: "Luxury",
      marketValueCp: 271.392,
      displayPrice: "2si 71cp 3st 9ci",
      suggestedPriceCp: 271,
      netProfitCp: 40.709,
      slots: ["pouch", "neck"]
    },
    {
      id: "trn:pendant-silver-simple",
      displayName: "Simple Pendant, Silver",
      variant: "Simple",
      qualityTier: "Common",
      marketValueCp: 360,
      displayPrice: "3si 60cp",
      suggestedPriceCp: 360,
      netProfitCp: 64.44,
      slots: ["neck"]
    },
    {
      id: "trn:pendant-silver-standard",
      displayName: "Standard Pendant, Silver",
      variant: "Standard",
      qualityTier: "Common",
      marketValueCp: 400,
      displayPrice: "4si",
      suggestedPriceCp: 400,
      netProfitCp: 67.6,
      slots: ["neck"]
    },
    {
      id: "trn:pendant-silver-fine",
      displayName: "Fine Pendant, Silver",
      variant: "Fine",
      qualityTier: "Fine",
      marketValueCp: 616.8,
      displayPrice: "6si 16cp 8st",
      suggestedPriceCp: 617,
      netProfitCp: 92.52,
      slots: ["neck"]
    },
    {
      id: "trn:pendant-silver-ornate",
      displayName: "Ornate Pendant, Silver",
      variant: "Ornate",
      qualityTier: "Luxury",
      marketValueCp: 1356.96,
      displayPrice: "13si 56cp 9st 6ci",
      suggestedPriceCp: 1357,
      netProfitCp: 203.544,
      slots: ["neck"]
    }
  ]
};

export function createEmptyEquipment() {
  return {
    weapons: {
      mainHand: null,
      offHand: null,
      ranged: null,
      instrument: null,
      ammo: null
    },
    armor: {
      head: null,
      body: null,
      back: null,
      hands: null,
      waist: null,
      legs: null,
      feet: null
    },
    trinkets: {
      lEar: null,
      rEar: null,
      neck: null,
      lRing: null,
      rRing: null,
      pouch: null
    }
  };
}

export function createEquipmentItem({
  id = "",
  name = "",
  slot,
  type,
  damage = 0,
  defense = 0,
  abilities = [],
  effects = [],
  marketPrice = 0,
  condition = 100,
  weight = 0,
  rarity = "common",
  attributes = {},
  meta = {},
} = {}) {
  return {
    id,
    name,
    slot,
    type,
    baseStats: { damage, defense },
    abilities,
    effects,
    marketPrice,
    condition,
    weight,
    rarity,
    attributes,
    meta,
  };
}
