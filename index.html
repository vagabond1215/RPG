<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Text RPG</title>
  <link rel="stylesheet" href="style.css">
</head>
<body class="theme-light">
  <div id="app">
<nav class="top-menu">
  <div class="top-menu-main">
    <div class="top-menu-primary">
      <button id="character-button" class="top-menu-character" aria-label="Open character menu" title="Open character menu" aria-controls="characterMenu" aria-expanded="false" aria-live="polite" style="display:none;">
        <span class="top-menu-character-header">
          <span id="menu-character-name" class="top-menu-item" aria-label="Active character" title="Active character">‚Äî</span>
        </span>
        <span id="menu-money" class="top-menu-item currency" aria-label="Available funds" title="Available funds">‚Äî</span>
      </button>
      <div id="menu-time" class="time-display" aria-label="Current time" title="Current time">
        <div class="time-meta">
          <span id="menu-date" class="time-date" aria-label="Current date" title="Current date">‚Äî</span>
          <span class="time-meta-separator" aria-hidden="true">¬∑</span>
          <span class="time-clock">‚Äî</span>
        </div>
      <span class="time-label sr-only">‚Äî</span>
        <div class="time-display-xp" hidden>
          <span id="menu-job-level" class="xp-job-label" aria-live="polite">‚Äî</span>
          <div id="menu-xp-bar" class="top-resource-bar xp tooltip-anchor" data-resource="xp" role="progressbar" aria-label="Experience" aria-valuemin="0" aria-valuenow="0" aria-valuemax="0" data-tooltip="" hidden>
            <div class="top-resource-track"><div class="top-resource-fill"></div></div>
          </div>
        </div>
      </div>
      <div class="time-icons" role="group" aria-label="Time, season, weather, and controls">
        <span id="menu-time-icon" class="time-icon time-of-day-icon tooltip-anchor" role="img" aria-label="Time of day">‚Äî</span>
        <span id="menu-season-icon" class="time-icon season-icon tooltip-anchor" role="img" aria-label="Season">‚Äî</span>
        <span id="menu-weather-icon" class="time-icon weather-icon tooltip-anchor" role="img" aria-label="Weather">‚Äî</span>
        <button id="menu-button" class="time-icon time-action-button" aria-label="Menu" title="Menu" aria-controls="dropdownMenu" aria-expanded="false">
          <img src="assets/images/icons/Menu.png" alt="">
        </button>
        <div class="time-action settings-action">
          <button id="settings-button" class="time-icon time-action-button" aria-label="Settings" title="Settings">
            <img src="assets/images/icons/Settings.png" alt="">
          </button>
          <div id="settings-panel" class="time-settings-panel">
            <div class="settings-row settings-controls">
              <button id="theme-toggle" aria-label="Toggle theme">
                <img src="assets/images/icons/Theme.png" alt="Theme">
              </button>
              <button id="scale-dec" aria-label="Decrease UI size">
                <img src="assets/images/icons/Minus.png" alt="Decrease">
              </button>
              <button id="scale-reset" class="settings-zoom-display" aria-label="Reset zoom to default">100%</button>
              <button id="scale-inc" aria-label="Increase UI size">
                <img src="assets/images/icons/Plus.png" alt="Increase">
              </button>
            </div>
            <div class="settings-row settings-units">
              <span class="settings-label">Units</span>
              <label class="settings-toggle" for="unit-toggle">
                <span class="sr-only">Toggle between imperial and metric units</span>
                <input type="checkbox" id="unit-toggle" role="switch" aria-checked="false" aria-label="Use metric units">
                <span class="settings-toggle-track" aria-hidden="true">
                  <span class="settings-toggle-thumb"></span>
                </span>
                <span id="unit-toggle-text" class="settings-toggle-text" data-imperial="Imperial" data-metric="Metric">Imperial</span>
              </label>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="top-menu-actions">
      <button id="back-button" aria-label="Back" style="display:none;">
        <img src="assets/images/icons/Back Arrow.png" alt="Back">
      </button>
    </div>
  </div>
  <div class="top-menu-status">
    <div class="top-menu-resource-bars" role="group" aria-label="Character resources" aria-live="polite" hidden>
      <div class="top-resource-bar hp tooltip-anchor" data-resource="hp" role="progressbar" aria-label="Hit points" aria-valuemin="0" aria-valuenow="0" aria-valuemax="0" data-tooltip="">
        <span class="top-resource-label">HP</span>
        <div class="top-resource-track"><div class="top-resource-fill"></div></div>
      </div>
      <div class="top-resource-bar mp tooltip-anchor" data-resource="mp" role="progressbar" aria-label="Mana" aria-valuemin="0" aria-valuenow="0" aria-valuemax="0" data-tooltip="">
        <span class="top-resource-label">MP</span>
        <div class="top-resource-track"><div class="top-resource-fill"></div></div>
      </div>
      <div class="top-resource-bar stamina tooltip-anchor" data-resource="stamina" role="progressbar" aria-label="Stamina" aria-valuemin="0" aria-valuenow="0" aria-valuemax="0" data-tooltip="">
        <span class="top-resource-label">ST</span>
        <div class="top-resource-track"><div class="top-resource-fill"></div></div>
      </div>
    </div>
  </div>
  </nav>

<div id="dropdownMenu">
    <button data-action="character-select">Character Select</button>
    <button data-action="new-character">New Character</button>
    <button data-action="clear-data">Clear Local Data</button>
</div>

<div id="characterMenu">
  <button data-action="profile">
    <svg viewBox="0 0 24 24">
      <circle cx="12" cy="8" r="4" />
      <path d="M4 20c0-4 4-6 8-6s8 2 8 6" />
    </svg>
    Profile
  </button>
  <button data-action="inventory">
    <svg viewBox="0 0 24 24">
      <path d="M12 22v-9" />
      <path d="M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z" />
      <path d="M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13" />
      <path d="M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z" />
    </svg>
    Inventory
  </button>
  <button data-action="equipment">
    <svg viewBox="0 0 24 24">
      <path d="M6 4l6-2 6 2v5l-2 2v9l-4-2-4 2v-9l-2-2V4Z" />
    </svg>
    Equipment
  </button>
  <button data-action="spellbook">
    <svg viewBox="0 0 24 24">
      <path d="M3 4h9v16H3z" />
      <path d="M12 4h9v16h-9z" />
      <path d="M12 4v16" />
      <path d="M15 8l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2z" />
    </svg>
    Spellbook
  </button>
  <button data-action="bestiary">
    <span class="letter-icon">B</span>
    Bestiary
  </button>
  <button data-action="herbarium">
    <span class="letter-icon">H</span>
    Herbarium
  </button>
  <button data-action="abilities">
    <span class="letter-icon">A</span>
    Abilities
  </button>
  <button data-action="proficiencies">
    <span class="letter-icon">P</span>
    Proficiencies
  </button>
  <button data-action="buildings">
    <svg viewBox="0 0 24 24">
      <path d="M3 21h18v-11l-9-7-9 7z" />
      <path d="M9 21v-6h6v6" />
    </svg>
    Buildings
  </button>
  <button data-action="action-log">
    <svg viewBox="0 0 24 24">
      <path d="M5 6h14" />
      <path d="M5 12h14" />
      <path d="M5 18h9" />
      <path d="M4 4v16" />
    </svg>
    Action Log
  </button>
  <button data-action="quests">
    <svg viewBox="0 0 24 24">
      <path d="M19 17V5a2 2 0 0 0-2-2H4" />
      <path d="M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3" />
    </svg>
    Quests
  </button>
  </div>


<main style="padding:1rem;"></main>

  <!-- Character Creation Overlay -->
  <section id="char-creator" class="cc is-hidden" aria-hidden="true">
    <header class="cc-summary" aria-label="Character Summary">
      <div class="cc-summary-left">
        <div class="cc-portrait" aria-hidden="true"></div>
        <div class="cc-id">
          <label for="cc-name">Name</label>
          <input id="cc-name" type="text" placeholder="Enter name" />
          <div class="cc-row">
            <label for="cc-class">Class</label>
            <select id="cc-class"></select>
          </div>
          <div class="cc-row">
            <span class="cc-level">Lv <span id="cc-level">1</span></span>
            <div class="cc-xp">
              <div class="cc-xp-bar" id="cc-xp-bar" style="--xp:0%"></div>
              <span id="cc-xp-text">0 / 100</span>
            </div>
          </div>
        </div>
      </div>

      <div class="cc-summary-stats" role="status" aria-live="polite">
        <div class="cc-stat"><span>HP</span><strong id="cc-hp">100</strong></div>
        <div class="cc-stat"><span>MP</span><strong id="cc-mp">50</strong></div>
        <div class="cc-stat"><span>STR</span><strong id="cc-str">10</strong></div>
        <div class="cc-stat"><span>DEX</span><strong id="cc-dex">8</strong></div>
        <div class="cc-stat"><span>INT</span><strong id="cc-int">7</strong></div>
      </div>

      <!-- Settings button required during creation -->
      <div class="cc-actions">
        <button id="cc-settings" class="icon" title="Settings" aria-label="Settings">‚öôÔ∏è</button>
        <button id="cc-save-draft">Save Draft</button>
        <button id="cc-reset-draft" class="ghost">Reset Draft</button>
        <button id="cc-exit" class="ghost">Exit</button>
      </div>
    </header>

    <div class="cc-body">
      <nav class="cc-nav" aria-label="Character Sections">
        <button class="active" data-section="wizard">üß≠ <span>Wizard</span></button>
        <button data-section="profile">üë§ <span>Profile</span></button>
        <button data-section="stats">üìä <span>Stats</span></button>
        <button data-section="abilities">‚ú® <span>Abilities</span></button>
        <button data-section="spells">üìú <span>Spells</span></button>
        <button data-section="equipment">üó°Ô∏è <span>Equipment</span></button>
        <button data-section="proficiencies">üõ†Ô∏è <span>Proficiencies</span></button>
      </nav>

      <main class="cc-detail" id="cc-detail" tabindex="-1">
        <section id="cc-wizard" aria-label="Creation Wizard">
          <div class="cc-steps" role="progressbar" aria-valuemin="1" aria-valuemax="5" aria-valuenow="1">
            <div class="cc-step active" data-step="1">Profile</div>
            <div class="cc-step" data-step="2">Class</div>
            <div class="cc-step" data-step="3">Stats</div>
            <div class="cc-step" data-step="4">Starter Kit</div>
            <div class="cc-step" data-step="5">Confirm</div>
          </div>
          <div class="cc-step-body" id="cc-step-body"><!-- renderStep() injects here --></div>
          <div class="cc-step-actions">
            <button id="cc-prev" class="ghost" disabled>Back</button>
            <button id="cc-next">Next</button>
            <button id="cc-finish" disabled>Finish</button>
          </div>
        </section>
      </main>
    </div>
  </section>
  </div>
<script type="module" src="script.js"></script>
<script>
  if (window.location.protocol === 'file:') {
    const app = document.getElementById('app');
    const warning = document.createElement('p');
    warning.className = 'protocol-warning';
    warning.innerHTML = 'Loading directly from the filesystem may prevent some data files from being fetched. For the full experience, use a local server or the GitHub Pages deployment.';
    document.body.insertBefore(warning, app);
  }
</script>
</body>
</html>
