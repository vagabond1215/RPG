{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "additionalProperties": false,
  "required": ["id","common_name","taxon_group","regions","habitats","diet","domestication","behavior","edibility","byproducts","gendered","narrative"],
  "properties": {
    "id": {"type": "string"},
    "common_name": {"type": "string"},
    "alt_names": {"type": "array", "items": {"type": "string"}},
    "taxon_group": {"type": "string", "enum": ["mammal","bird","fish","reptile","amphibian","insect","arachnid","mollusk","crustacean","annelid","other"]},
    "regions": {
      "type": "array",
      "items": {
        "type": "string",
        "enum": [
          "aquatic",
          "wetlands_transitional",
          "terrestrial",
          "coastal",
          "subterranean",
          "polar_ice",
          "extreme",
          "urban"
        ]
      }
    },
    "habitats": {
      "type": "array",
      "items": {
        "type": "string",
        "enum": [
          "deep_sea",
          "open_ocean",
          "coral_reefs",
          "kelp_forests",
          "continental_shelves",
          "estuaries",
          "ocean_shores",
          "rivers",
          "streams",
          "lakes",
          "ponds",
          "springs",
          "swamps",
          "marshes",
          "bogs",
          "fens",
          "floodplains",
          "mangroves",
          "brackish_marshlands",
          "tidal_flats",
          "tropical_rainforest",
          "temperate_rainforest",
          "deciduous_forest",
          "boreal_forest",
          "dry_forest",
          "savanna",
          "prairie",
          "steppe",
          "pampas",
          "meadow",
          "hot_desert",
          "cold_desert",
          "semi_arid_scrublands",
          "alpine_tundra",
          "montane_forest",
          "cliffs",
          "scree_slopes",
          "arctic_tundra",
          "subarctic_tundra",
          "permafrost_zones",
          "beaches",
          "coastal_dunes",
          "lagoons",
          "barrier_islands",
          "limestone_caves",
          "lava_tubes",
          "underground_rivers",
          "underground_lakes",
          "karst_systems",
          "pack_ice",
          "ice_shelves",
          "glaciers",
          "snowfields",
          "polar_deserts",
          "volcanic_regions",
          "geothermal_springs",
          "high_altitude_plateaus",
          "hyper_arid_salt_basins",
          "farmland",
          "forest",
          "grassland",
          "hills",
          "urban"
        ]
      }
    },
    "diet": {"type": "array", "items": {"type": "string", "enum": ["herbivore","grazer","browser","carnivore","insectivore","omnivore","scavenger","piscivore","detritivore"]}},
    "food_sources": {"type": "array", "items": {"type": "string"}},
    "domestication": {
      "type": "object",
      "additionalProperties": false,
      "required": ["domesticated"],
      "properties": {
        "domesticated": {"type": "boolean"},
        "trainable": {"type": "boolean"},
        "draft_or_mount": {"type": "boolean"},
        "notes": {"type": "string"}
      }
    },
    "behavior": {
      "type": "object",
      "additionalProperties": false,
      "required": ["aggressive","territorial","risk_to_humans"],
      "properties": {
        "aggressive": {"type": "boolean"},
        "territorial": {"type": "boolean"},
        "risk_to_humans": {"type": "string", "enum": ["none","low","moderate","high"]},
        "nocturnal": {"type": "boolean"},
        "migratory": {"type": "boolean"}
      }
    },
    "edibility": {
      "type": "object",
      "additionalProperties": false,
      "required": ["edible"],
      "properties": {
        "edible": {"type": "boolean"},
        "parts": {"type": "array", "items": {"type": "string"}},
        "preparation_notes": {"type": "string"},
        "taboo_or_restricted": {"type": "boolean"}
      },
      "allOf": [
        {
          "if": {"properties": {"edible": {"const": true}}},
          "then": {
            "required": ["parts", "preparation_notes"],
            "properties": {
              "parts": { "type": "array", "minItems": 1 },
              "preparation_notes": { "type": "string", "minLength": 1 }
            }
          }
        }
      ]
    },
    "disease_risks": {"type": "array", "items": {"type": "string"}},
    "byproducts": {
      "type": "array",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": ["type"],
        "properties": {
          "type": {"type": "string", "enum": ["hide","fur","feather","bone","antler","horn","tooth","fat","meat","milk","egg","chicken egg","duck egg","goose egg","sheep wool","venom","shell"]},
          "notes": {"type": "string"},
          "yield_unit": {"type": "string", "enum": ["kg","g","L","count"]},
          "avg_yield": {"type": "number"},
          "harvest_method": {"type": "string", "enum": ["domesticated","wild","either"]}
        }
      }
    },
    "gendered": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "male": {"type": "string"},
        "female": {"type": "string"},
        "juvenile": {"type": "string"},
        "collective": {"type": "string"}
      }
    },
    "variants": {
      "type": "array",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": ["label"],
        "properties": {
          "label": {"type": "string"},
          "notes": {"type": "string"}
        }
      }
    },
    "size_class": {"type": "string", "enum": ["tiny","small","medium","large","huge"]},
    "mating_season": {"type": "string"},
    "gestation_period": {"type": "string"},
    "incubation_period": {"type": "string"},
    "reproduction_notes": {"type": "string"},
    "production_cycles": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "egg_laying_frequency": {"type": "string"},
        "milk_production_duration": {"type": "string"},
        "wool_shearing_cycle": {"type": "string"}
      }
    },
    "butchering_age": {"type": "string"},
    "narrative": {"type": "string"}
  }
}
